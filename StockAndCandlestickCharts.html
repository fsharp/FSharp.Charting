<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>FSharp.Charting: Stock and Candlestick Charts
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The FSharp.Charting library implements charting suitable for in F# scripting.">
    <meta name="author" content="Don Syme, Carl Nolan, Tomas Petricek">

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src=" https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="http://fslab.org/FSharp.Charting/content/style.css" />
    <script type="text/javascript" src="http://fslab.org/FSharp.Charting/content/tips.js"></script>

    <script type="text/javascript">
      // Redirect using JavaScript - which is not perfect, but AFAIK the best we can do 
      // (We also generate link rel="canonical" (below) to let Google know *when we can*
      if (window.location.host == "fsharp.github.io") {
        window.location = window.location.toString().replace("fsharp.github.io", "fslab.org");
      }
    </script>
      <link rel="canonical" href="http://fslab.org/FSharp.Charting/StockAndCandlestickCharts.html" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="https://fslab.org">fslab.org</a></li>
          <li><a href="https://fslab.org/RProvider"><img height=" 16" width="16" src="https://fsharp.org/images/thumbs/FSharpRProvider.png" /> R Provider</a></li>
          <li><a href="https://fslab.org/FSharp.Charting/"><img height="16" width="16" src="https://fsharp.org/images/thumbs/FSharp.Charting.png" /> FSharp.Charting</a></li>
          <li><a href="https://fslab.org/XPlot/"><img height="16" width="16" src="https://fslab.org/XPlot/img/logo.png" /> FSharp.Charting</a></li>
          <li><a href="https://fsharp.github.io/FSharp.Data"><img height="16" width="16" src="https://fsharp.org/images/thumbs/FSharp.Data.png" /> FSharp.Data</a></li>
        </ul>
        <h3 class="muted"><a href="http://fslab.org/FSharp.Charting/index.html">FSharp.Charting</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1>FSharp.Charting: Stock and Candlestick Charts</h1>

<p><em>Summary:</em> This example shows how to create stock and candlestick charts to visualize financial data in F#. 
It looks at how to draw charts, use dates as labels, and specify the range of a chart.</p>

<p>Stock and candlestick charts are designed to visualize stock prices. The data recorded about 
stock prices typically consists of four values representing High, Low, Open, and Close prices. 
The first two are the maximum and minimum price of the stock reached during the day and the 
last two are prices at the start and the end of the day. The examples use the following data 
set (price of MSFT stocks over 10 days):</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="i">prices</span> <span class="o">=</span>
  [ <span class="n">26.24</span>,<span class="n">25.80</span>,<span class="n">26.22</span>,<span class="n">25.95</span>; <span class="n">26.40</span>,<span class="n">26.18</span>,<span class="n">26.26</span>,<span class="n">26.20</span>
    <span class="n">26.37</span>,<span class="n">26.04</span>,<span class="n">26.11</span>,<span class="n">26.08</span>; <span class="n">26.78</span>,<span class="n">26.15</span>,<span class="n">26.60</span>,<span class="n">26.16</span>
    <span class="n">26.86</span>,<span class="n">26.51</span>,<span class="n">26.69</span>,<span class="n">26.58</span>; <span class="n">26.95</span>,<span class="n">26.50</span>,<span class="n">26.91</span>,<span class="n">26.55</span>
    <span class="n">27.06</span>,<span class="n">26.50</span>,<span class="n">26.64</span>,<span class="n">26.77</span>; <span class="n">26.86</span>,<span class="n">26.43</span>,<span class="n">26.53</span>,<span class="n">26.59</span>
    <span class="n">27.10</span>,<span class="n">26.52</span>,<span class="n">26.78</span>,<span class="n">26.59</span>; <span class="n">27.21</span>,<span class="n">26.99</span>,<span class="n">27.13</span>,<span class="n">27.06</span>
    <span class="n">27.37</span>,<span class="n">26.91</span>,<span class="n">26.97</span>,<span class="n">27.21</span>; <span class="n">27.07</span>,<span class="n">26.60</span>,<span class="n">27.05</span>,<span class="n">27.02</span>
    <span class="n">27.33</span>,<span class="n">26.95</span>,<span class="n">27.04</span>,<span class="n">26.96</span>; <span class="n">27.27</span>,<span class="n">26.95</span>,<span class="n">27.21</span>,<span class="n">27.23</span>
    <span class="n">27.81</span>,<span class="n">27.07</span>,<span class="n">27.76</span>,<span class="n">27.25</span>; <span class="n">27.94</span>,<span class="n">27.29</span>,<span class="n">27.93</span>,<span class="n">27.50</span>
    <span class="n">28.26</span>,<span class="n">27.91</span>,<span class="n">28.19</span>,<span class="n">27.97</span>; <span class="n">28.34</span>,<span class="n">28.05</span>,<span class="n">28.10</span>,<span class="n">28.28</span>
    <span class="n">28.34</span>,<span class="n">27.79</span>,<span class="n">27.80</span>,<span class="n">28.20</span>; <span class="n">27.84</span>,<span class="n">27.51</span>,<span class="n">27.70</span>,<span class="n">27.77</span> ]
</code></pre></td>
</tr>
</table>

<p>More information about working with financial data and how to download 
stock prices from the Yahoo Finance portal using F# can be found in <a href="http://tryfsharp.org">Try F#</a>.</p>

<p>A stock or a candlestick chart can be created using the <code>FSharpChart.Stock</code> and <code>FSharpChart.Candlestick</code> methods. Financial charts for
visualizing stocks require four values for drawing each data point (High, Low, Open, and Close price). 
When calling the methods, it is possible to specify the values as a collection 
containing four-element tuples, or five-element tuples (Date, High, Low, Open, and Close price).</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// On Mac OSX use FSharp.Charting.Gtk.fsx</span>
<span class="prep">#I</span> <span class="s">&quot;packages/FSharp.Charting&quot;</span>
<span class="prep">#load</span> <span class="s">&quot;FSharp.Charting.fsx&quot;</span>

<span class="k">open</span> <span class="i">FSharp</span><span class="o">.</span><span class="i">Charting</span>
<span class="k">open</span> <span class="i">System</span>
</code></pre></td>
</tr>
</table>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">Chart</span><span class="o">.</span><span class="i">Stock</span>(<span class="i">prices</span>)
</code></pre></td>
</tr>
</table>

<p><img src="http://fslab.org/FSharp.Charting/images/chart20.png" alt="Chart" /></p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="i">pricesWithDates</span> <span class="o">=</span> 
    <span class="i">prices</span> <span class="o">|&gt;</span> <span class="i">List</span><span class="o">.</span><span class="i">mapi</span> (<span class="k">fun</span> <span class="i">i</span> (<span class="i">hi</span>,<span class="i">lo</span>,<span class="i">op</span>,<span class="i">cl</span>) <span class="k">-&gt;</span> 
        (<span class="i">DateTime</span><span class="o">.</span><span class="i">Today</span><span class="o">.</span><span class="i">AddDays</span>(<span class="i">float</span> <span class="i">i</span>)<span class="o">.</span><span class="i">ToShortDateString</span>(), <span class="i">hi</span>, <span class="i">lo</span>, <span class="i">op</span>, <span class="i">cl</span>))
</code></pre></td>
</tr>
</table>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Candlestick chart price range specified</span>
<span class="i">Chart</span><span class="o">.</span><span class="i">Candlestick</span>(<span class="i">pricesWithDates</span>)<span class="o">.</span><span class="i">WithYAxis</span>(<span class="i">Max</span> <span class="o">=</span> <span class="n">29.0</span>, <span class="i">Min</span> <span class="o">=</span> <span class="n">25.0</span>)
</code></pre></td>
</tr>
</table>

<p><img src="http://fslab.org/FSharp.Charting/images/chart21.png" alt="Chart" /></p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Alternative specification using pipelining</span>
<span class="i">Chart</span><span class="o">.</span><span class="i">Candlestick</span>(<span class="i">pricesWithDates</span>)
<span class="o">|&gt;</span> <span class="i">Chart</span><span class="o">.</span><span class="i">WithYAxis</span>(<span class="i">Max</span> <span class="o">=</span> <span class="n">29.0</span>, <span class="i">Min</span> <span class="o">=</span> <span class="n">25.0</span>)
</code></pre></td>
</tr>
</table>

<p><img src="http://fslab.org/FSharp.Charting/images/chart22.png" alt="Chart" /></p>

<p>When using F# Interactive, each of these examples needs to be evaluated separately. This way, F# Interactive invokes a handler that automatically shows the created chart.</p>

<p>The first snippet calls the <code>Chart.Stock</code> method with a list containing prices as
four-element tuples.</p>

<p>The second example adds dates as the labels for the chart. 
This is done using the <code>List.mapi</code> function. The lambda function used as an argument returns a tuple 
containing the date and the original tuple of prices. 
The example also demonstrates how to set the price range of the Y axis using the method <code>WithYAxis</code>.</p>

<p>The last example shows an elegant way of configuring the Y axis range by using pipelining (the <code>|&gt;</code> operator).
The chart specification is passed to a configuration method <code>Chart.WithYAxis</code> using pipelining.
This method takes named parameters that allow us to specify the range and other properties of the axis.</p>


        </div>
        <div class="span3">
          <a href="http://fslab.org/FSharp.Charting/index.html">
            <img src="http://fslab.org/FSharp.Charting/images/logo.png" style="width:140px;height:140px;margin:10px 0px 0px 35px;border-style:none;" />
          </a>

          <ul class="nav nav-list" id="menu">
            <li class="nav-header">FSharp.Charting</li>
            <li><a href="http://fslab.org/FSharp.Charting/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="https://nuget.org/packages/FSharp.Charting">Get Library via NuGet</a></li>
            <li><a href="http://github.com/fslaborg/FSharp.Charting">Source Code on GitHub</a></li>
            <li><a href="http://github.com/fslaborg/FSharp.Charting/blob/master/LICENSE.md">License (BSD)</a></li>
            <li><a href="http://github.com/fslaborg/FSharp.Charting/blob/master/RELEASE_NOTES.md">Release notes</a></li>
            <li><a href="http://fslab.org/FSharp.Charting/contributing.html">Contributing to FSharp.Charting</a></li>
            
            <li class="nav-header">Documentation</li>
            <li><a href="http://fslab.org/FSharp.Charting/fsharpcharting.html">FSharp.Charting Documentation</a></li>
            <li class="divider"></li>
            <li><a href="http://fslab.org/FSharp.Charting/ReferencingTheLibrary.html">Referencing The Library</a></li>
            <li><a href="http://fslab.org/FSharp.Charting/PointAndLineCharts.html">Point and Line Charts</a></li>
            <li><a href="http://fslab.org/FSharp.Charting/BarAndColumnCharts.html">Bar and Column Charts</a></li>
            <li><a href="http://fslab.org/FSharp.Charting/PieAndDougnutCharts.html">Pie and Doughnut Charts</a></li>
            <li><a href="http://fslab.org/FSharp.Charting/StockAndCandlestickCharts.html">Stock and Candlestick Charts</a></li>
            <li><a href="http://fslab.org/FSharp.Charting/BoxPlotCharts.html">BoxPlot Charts</a></li>
            <li><a href="http://fslab.org/FSharp.Charting/LiveChartSamples.html">Live Animated Charts</a></li>
            <!-- <li><a href="FurtherSamples.html">Further Samples</a></li> -->

            <li class="nav-header">Documentation</li>
            <li><a href="http://fslab.org/FSharp.Charting/reference/fsharp-charting-chart.html">Chart API reference</a></li>
            <li><a href="http://fslab.org/FSharp.Charting/reference/fsharp-charting-livechart.html">LiveChart API reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/fslaborg/FSharp.Charting"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
  </body>
</html>
